%% 
%% Listings and Listing Styles.
%%
%
\RequirePackage{listings}%
%
\lstdefinestyle{python_style}{%
%
backgroundcolor=\color{listing-background},%
numbers=left,%
frame=single,%
rulecolor=\color{listing-rule},%
frameround=ffff,%
%
breaklines=true,%
tabsize=4,%
%
language=Python,%
sensitive=true,%
%
basicstyle=\small\color{listing-text-color}\linespread{1.0}\lst@ifdisplaystyle\small\fi\ttfamily{},%
identifierstyle=\color{listing-identifier},%
numberstyle=\color{listing-line-numbers},%
%
otherkeywords={\%,\},\{,\&,\|},
keywordstyle=\color{listing-keyword-1}\bfseries,
%
emph={and,break,class,continue,def,yield,del,elif,else,except,exec,finally,for,from,global,if,import,in,lambda,not,or,pass,print,raise,return,try,while,assert,with},%
emphstyle=\color{listing-emph-1}\bfseries,
%
emph={[2]True,False,None},%
emphstyle=[2]\color{listing-emph-2},%
%
emph={[3]object,type,isinstance,copy,deepcopy,zip,enumerate,reversed,list,set,len,dict,tuple,xrange,append,execfile,real,imag,reduce,str,repr},%
emphstyle=[3]\color{listing-emph-3},%
%
emph={[4]Exception,NameError,IndexError,SyntaxError,TypeError,ValueError,OverflowError,ZeroDivisionError},%
emphstyle=[4]\color{listing-emph-4}\bfseries,%
%
emph={[5]ode,fsolve,sqrt,exp,sin,cos,arctan,arctan2,arccos,pi,array,norm,dot,arange,isscalar,max,sum,flatten,shape,reshape,find,any,all,abs,plot,linspace,legend,quad,polyval,polyfit,hstack,concatenate,vstack,column_stack,empty,zeros,ones,rand,vander,grid,pcolor,eig,eigs,eigvals,svd,qr,tan,det,logspace,roll,min,mean,cumsum,cumprod,diff,vectorize,lstsq,cla,eye,xlabel,ylabel,squeeze},%
emphstyle=[5]\color{listing-emph-5},%
%
emph={[6]__init__,__add__,__mul__,__div__,__sub__,__call__,__getitem__,__setitem__,__eq__,__ne__,__new__,__nonzero__,__rmul__,__radd__,__repr__,__str__,__get__,__truediv__,__pow__,__name__,__future__,__all__},%
emphstyle=[6]\color{listing-emph-6},%
%
emph={[7]assert,yield},%
emphstyle=[7]\color{listing-emph-7}\bfseries,%
%
emph={[8]range},%
emphstyle={[8]\color{listing-emph-8}\bfseries},%
%
keywordstyle={[2]\color{listing-keyword-2}\bfseries},%
keywordstyle={[3]\color{listing-keyword-3}\bfseries\itshape},%
%
commentstyle=\itshape\color{listing-comment},%
%
stringstyle=\color{listing-string},%
showstringspaces=false,%
morestring=[s]{"""}{"""},%
%
literate=%
{á}{{\'a}}1 {é}{{\'e}}1 {í}{{\'i}}1 {ó}{{\'o}}1 {ú}{{\'u}}1%
{Á}{{\'A}}1 {É}{{\'E}}1 {Í}{{\'I}}1 {Ó}{{\'O}}1 {Ú}{{\'U}}1%
{à}{{\`a}}1 {è}{{\'e}}1 {ì}{{\`i}}1 {ò}{{\`o}}1 {ù}{{\`u}}1%
{À}{{\`A}}1 {È}{{\'E}}1 {Ì}{{\`I}}1 {Ò}{{\`O}}1 {Ù}{{\`U}}1%
{ä}{{\"a}}1 {ë}{{\"e}}1 {ï}{{\"i}}1 {ö}{{\"o}}1 {ü}{{\"u}}1%
{Ä}{{\"A}}1 {Ë}{{\"E}}1 {Ï}{{\"I}}1 {Ö}{{\"O}}1 {Ü}{{\"U}}1%
{â}{{\^a}}1 {ê}{{\^e}}1 {î}{{\^i}}1 {ô}{{\^o}}1 {û}{{\^u}}1%
{Â}{{\^A}}1 {Ê}{{\^E}}1 {Î}{{\^I}}1 {Ô}{{\^O}}1 {Û}{{\^U}}1%
{œ}{{\oe}}1 {Œ}{{\OE}}1 {æ}{{\ae}}1 {Æ}{{\AE}}1 {ß}{{\ss}}1%
{ç}{{\c c}}1 {Ç}{{\c C}}1 {ø}{{\o}}1 {å}{{\r a}}1 {Å}{{\r A}}1%
{€}{{\EUR}}1 {£}{{\pounds}}1 {«}{{\guillemotleft}}1%
{»}{{\guillemotright}}1 {ñ}{{\~n}}1 {Ñ}{{\~N}}1 {¿}{{?`}}1%
{…}{{\ldots}}1 {≥}{{>=}}1 {≤}{{<=}}1 {„}{{\glqq}}1 {“}{{\grqq}}1%
{”}{{''}}1%
}%
\lstset{style=python_style}%
%
%
% print some code inline
% #1 the optional args
% #2 the code to be printed inline
\gdef\codeil#1{%
\mbox{\fcolorbox{listing-rule}{listing-background}{\mbox{%
\lstinline[style=python_style]$#1$%
}}}}%
%
%%
%% Use latexgit to place a listing.
%% #1 the git repository
%% #2 the local path
%% #3 the post-processing
%% #4 the label (lst: will be pre-pended)
%% #5 the caption
\protected\gdef\gitCode#1#2#3#4#5{%
\gitLoad{#1}{#2}{#3}%
\lstinputlisting[float,label={lst:#4},caption={#5~(\href{\gitUrl}{src})}]{\gitFile}%
}%
%
%%
%% Use latexgit to place a Python listing.
%% #1 the git repository
%% #2 the local path
%% #3 the post-processing
%% #4 the label (lst: will be pre-pended)
%% #5 the caption
\protected\gdef\gitPython#1#2#3#4#5{%
\gitCode{#1}{#2}{python3 -m latexgit.formatters.python #3}{#4}{#5}%
}%
%
%